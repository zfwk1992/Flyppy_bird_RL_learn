<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FixedOptimizedDQN ç½‘ç»œæ¶æ„å›¾</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .network-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            margin: 40px 0;
        }
        
        .layer {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 
                inset 5px 5px 10px #e0e0e0,
                inset -5px -5px 10px #ffffff,
                0 10px 30px rgba(0,0,0,0.1);
            min-width: 300px;
            text-align: center;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .layer:hover {
            transform: translateY(-5px);
        }
        
        .layer-title {
            font-weight: bold;
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .layer-details {
            color: #34495e;
            line-height: 1.6;
        }
        
        .input-layer {
            background: linear-gradient(145deg, #74b9ff, #0984e3);
            color: white;
        }
        
        .conv-layer {
            background: linear-gradient(145deg, #fd79a8, #e84393);
            color: white;
        }
        
        .pool-layer {
            background: linear-gradient(145deg, #fdcb6e, #e17055);
            color: white;
        }
        
        .fc-layer {
            background: linear-gradient(145deg, #55a3ff, #2d3436);
            color: white;
        }
        
        .output-layer {
            background: linear-gradient(145deg, #00b894, #00a085);
            color: white;
        }
        
        .arrow {
            font-size: 2em;
            color: #74b9ff;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .dimensions {
            font-weight: bold;
            font-size: 1.1em;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 20px;
            margin-top: 10px;
            display: inline-block;
        }
        
        .parameters {
            background: rgba(0,0,0,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
        }
        
        .flow-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .info-box {
            background: #f8f9fa;
            border-left: 5px solid #74b9ff;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 20px 0;
        }
        
        .highlight {
            background: #ffeaa7;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§  FixedOptimizedDQN ç½‘ç»œæ¶æ„</h1>
        <p class="subtitle">Flappy Bird å¼ºåŒ–å­¦ä¹ å•æ­¥é¢„æµ‹ç¥ç»ç½‘ç»œæ¨¡å‹</p>
        
        <div class="info-box">
            <h3>ğŸ“ æ¨¡å‹æ¦‚è¿°</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„æ·±åº¦Qç½‘ç»œï¼ˆDQNï¼‰ï¼Œä¸“é—¨ä¸º Flappy Bird æ¸¸æˆçš„å•æ­¥åŠ¨ä½œé¢„æµ‹è€Œè®¾è®¡ã€‚ç›¸æ¯”å¤æ‚çš„å¤šæ­¥é¢„æµ‹ï¼Œè¯¥æ¨¡å‹é‡‡ç”¨ç»å…¸çš„ DQN æ¶æ„ï¼Œå…·æœ‰æ›´å¥½çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>
        </div>
        
        <div class="network-diagram">
            <!-- è¾“å…¥å±‚ -->
            <div class="layer input-layer">
                <div class="layer-title">ğŸ“¥ è¾“å…¥å±‚ (Input Layer)</div>
                <div class="layer-details">
                    4ä¸ªè¿ç»­æ¸¸æˆå¸§çš„ç°åº¦å›¾åƒ<br>
                    æ¯å¸§å°ºå¯¸: 80 Ã— 80 åƒç´ 
                    <div class="dimensions">ç»´åº¦: [Batch, 4, 80, 80]</div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- ç¬¬ä¸€ä¸ªå·ç§¯å±‚ -->
            <div class="layer conv-layer">
                <div class="layer-title">ğŸ” å·ç§¯å±‚ 1 + æ‰¹å½’ä¸€åŒ–</div>
                <div class="layer-details">
                    ç‰¹å¾æå–ï¼šæ£€æµ‹æ¸¸æˆä¸­çš„è¾¹ç¼˜å’ŒåŸºæœ¬å½¢çŠ¶<br>
                    æ¿€æ´»å‡½æ•°: ReLU
                    <div class="dimensions">è¾“å‡º: [Batch, 32, 20, 20]</div>
                    <div class="parameters">
                        â€¢ å·ç§¯æ ¸: 8Ã—8, æ­¥é•¿=4, å¡«å……=2<br>
                        â€¢ é€šé“æ•°: 4 â†’ 32<br>
                        â€¢ æ‰¹å½’ä¸€åŒ–: ç¨³å®šè®­ç»ƒè¿‡ç¨‹
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- ç¬¬äºŒä¸ªå·ç§¯å±‚ -->
            <div class="layer conv-layer">
                <div class="layer-title">ğŸ” å·ç§¯å±‚ 2 + æ‰¹å½’ä¸€åŒ–</div>
                <div class="layer-details">
                    é«˜çº§ç‰¹å¾æå–ï¼šè¯†åˆ«ç®¡é“ã€å°é¸Ÿç­‰æ¸¸æˆå¯¹è±¡<br>
                    æ¿€æ´»å‡½æ•°: ReLU
                    <div class="dimensions">è¾“å‡º: [Batch, 64, 10, 10]</div>
                    <div class="parameters">
                        â€¢ å·ç§¯æ ¸: 4Ã—4, æ­¥é•¿=2, å¡«å……=1<br>
                        â€¢ é€šé“æ•°: 32 â†’ 64<br>
                        â€¢ æ‰¹å½’ä¸€åŒ–: é˜²æ­¢æ¢¯åº¦æ¶ˆå¤±
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- è‡ªé€‚åº”æ± åŒ–å±‚ -->
            <div class="layer pool-layer">
                <div class="layer-title">ğŸ¯ è‡ªé€‚åº”å¹³å‡æ± åŒ–</div>
                <div class="layer-details">
                    ç¡®ä¿è¾“å‡ºå°ºå¯¸å›ºå®šï¼Œè§£å†³ç»´åº¦ä¸åŒ¹é…é—®é¢˜<br>
                    <span class="highlight">å…³é”®ä¼˜åŒ–</span>ï¼šå¤„ç†ä¸åŒè¾“å…¥å°ºå¯¸
                    <div class="dimensions">è¾“å‡º: [Batch, 64, 4, 4]</div>
                    <div class="parameters">
                        â€¢ æ± åŒ–ç±»å‹: AdaptiveAvgPool2d<br>
                        â€¢ ç›®æ ‡å°ºå¯¸: 4Ã—4<br>
                        â€¢ æ€»ç‰¹å¾æ•°: 64Ã—4Ã—4 = 1024
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- å±•å¹³å±‚ -->
            <div class="layer">
                <div class="layer-title">ğŸ“ å±•å¹³å±‚ (Flatten)</div>
                <div class="layer-details">
                    å°†2Dç‰¹å¾å›¾å±•å¹³ä¸º1Då‘é‡<br>
                    <div class="dimensions">è¾“å‡º: [Batch, 1024]</div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚ -->
            <div class="layer fc-layer">
                <div class="layer-title">ğŸ”— å…¨è¿æ¥å±‚ 1</div>
                <div class="layer-details">
                    ç‰¹å¾æ•´åˆå’Œé«˜çº§æŠ½è±¡<br>
                    æ¿€æ´»å‡½æ•°: ReLU
                    <div class="dimensions">è¾“å‡º: [Batch, 512]</div>
                    <div class="parameters">
                        â€¢ è¾“å…¥ç»´åº¦: 1024<br>
                        â€¢ è¾“å‡ºç»´åº¦: 512<br>
                        â€¢ å‚æ•°æ•°é‡: 1024Ã—512 = 524,288
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <!-- è¾“å‡ºå±‚ -->
            <div class="layer output-layer">
                <div class="layer-title">ğŸ¯ è¾“å‡ºå±‚ (Qå€¼é¢„æµ‹)</div>
                <div class="layer-details">
                    é¢„æµ‹æ¯ä¸ªåŠ¨ä½œçš„Qå€¼ï¼ˆä»·å€¼å‡½æ•°ï¼‰<br>
                    <span class="highlight">ç®€åŒ–è®¾è®¡</span>ï¼šå•æ­¥é¢„æµ‹è€Œéå¤šæ­¥
                    <div class="dimensions">è¾“å‡º: [Batch, 2]</div>
                    <div class="parameters">
                        â€¢ åŠ¨ä½œ0: ä¸è·³è·ƒçš„Qå€¼<br>
                        â€¢ åŠ¨ä½œ1: è·³è·ƒçš„Qå€¼<br>
                        â€¢ æ— æ¿€æ´»å‡½æ•°ï¼ˆçº¿æ€§è¾“å‡ºï¼‰
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-box">
            <h3>ğŸ”§ ç½‘ç»œç»“æ„ä»£ç </h3>
            <div class="code-block">
class FixedOptimizedDQN(nn.Module):
    def __init__(self, actions):
        super(FixedOptimizedDQN, self).__init__()
        
        # å·ç§¯å±‚
        self.conv1 = nn.Conv2d(4, 32, kernel_size=8, stride=4, padding=2)
        self.conv2 = nn.Conv2d(32, 64, kernel_size=4, stride=2, padding=1)
        
        # æ‰¹å½’ä¸€åŒ–
        self.bn1 = nn.BatchNorm2d(32)
        self.bn2 = nn.BatchNorm2d(64)
        
        # è‡ªé€‚åº”æ± åŒ–
        self.adaptive_pool = nn.AdaptiveAvgPool2d((4, 4))
        
        # å…¨è¿æ¥å±‚
        self.fc1 = nn.Linear(64 * 4 * 4, 512)
        self.fc2 = nn.Linear(512, actions)  # actions=2
    
    def forward(self, x):
        x = F.relu(self.bn1(self.conv1(x)))    # [B,4,80,80] â†’ [B,32,20,20]
        x = F.relu(self.bn2(self.conv2(x)))    # [B,32,20,20] â†’ [B,64,10,10]
        x = self.adaptive_pool(x)              # [B,64,10,10] â†’ [B,64,4,4]
        x = x.view(x.size(0), -1)             # [B,64,4,4] â†’ [B,1024]
        x = F.relu(self.fc1(x))               # [B,1024] â†’ [B,512]
        x = self.fc2(x)                       # [B,512] â†’ [B,2]
        return x
            </div>
        </div>
        
        <div class="flow-diagram">
            <div class="info-box">
                <h4>âœ¨ ä¸»è¦ä¼˜ç‚¹</h4>
                <ul>
                    <li><strong>ç®€å•å¯é </strong>ï¼šé¿å…å¤šæ­¥é¢„æµ‹çš„å¤æ‚æ€§</li>
                    <li><strong>è®­ç»ƒç¨³å®š</strong>ï¼šç»å…¸DQNæ¶æ„ï¼Œæ”¶æ•›æ€§å¥½</li>
                    <li><strong>ç»´åº¦å®‰å…¨</strong>ï¼šè‡ªé€‚åº”æ± åŒ–é¿å…å°ºå¯¸é”™è¯¯</li>
                    <li><strong>æ˜“äºè°ƒè¯•</strong>ï¼šé€»è¾‘æ¸…æ™°ï¼Œé—®é¢˜å®šä½å®¹æ˜“</li>
                </ul>
            </div>
            
            <div class="info-box">
                <h4>ğŸ¯ è®¾è®¡ç†å¿µ</h4>
                <ul>
                    <li><strong>å•æ­¥é¢„æµ‹</strong>ï¼šæ¯æ¬¡åªé¢„æµ‹ä¸‹ä¸€ä¸ªåŠ¨ä½œ</li>
                    <li><strong>æ ‡å‡†DQN</strong>ï¼šéµå¾ªæ·±åº¦Qå­¦ä¹ ç»å…¸è®¾è®¡</li>
                    <li><strong>ç‰¹å¾æå–</strong>ï¼šå·ç§¯å±‚æ•è·ç©ºé—´ç‰¹å¾</li>
                    <li><strong>ä»·å€¼è¯„ä¼°</strong>ï¼šå…¨è¿æ¥å±‚è¯„ä¼°åŠ¨ä½œä»·å€¼</li>
                </ul>
            </div>
        </div>
        
        <div class="info-box">
            <h3>ğŸ“Š æ¨¡å‹ç»Ÿè®¡ä¿¡æ¯</h3>
            <p><strong>æ€»å‚æ•°é‡</strong>ï¼šçº¦ 540,000 ä¸ªå‚æ•°</p>
            <p><strong>è¾“å…¥æ ¼å¼</strong>ï¼š4é€šé“80Ã—80å›¾åƒï¼ˆè¿ç»­4å¸§ï¼‰</p>
            <p><strong>è¾“å‡ºæ ¼å¼</strong>ï¼š2ä¸ªQå€¼ï¼ˆå¯¹åº”2ä¸ªåŠ¨ä½œï¼‰</p>
            <p><strong>è®­ç»ƒæ–¹æ³•</strong>ï¼šDeep Q-Learning with Experience Replay</p>
            <p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šFlappy Bird ç­‰ç®€å•æ¸¸æˆçš„å¼ºåŒ–å­¦ä¹ </p>
        </div>
        
        <div style="text-align: center; margin-top: 40px; color: #7f8c8d;">
            <p>ğŸ“… ç”Ÿæˆæ—¶é—´: <script>document.write(new Date().toLocaleString('zh-CN'));</script></p>
            <p>ğŸ® é¡¹ç›®: Flappy Bird Deep Q-Network</p>
        </div>
    </div>
</body>
</html>